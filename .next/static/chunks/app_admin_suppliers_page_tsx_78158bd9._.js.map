{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ekrem/OneDrive/Masa%C3%BCst%C3%BC/Stok/stok-takip/app/admin/suppliers/page.tsx"],"sourcesContent":["// ✅ /app/admin/suppliers/[id]/products/page.tsx\r\n'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useParams } from 'next/navigation';\r\nimport supabase from '@/lib/supabase';\r\n\r\ninterface Product {\r\n  id: string;\r\n  name: string;\r\n  stock: number;\r\n  supplier_id: string;\r\n}\r\n\r\ninterface Supplier {\r\n  id: string;\r\n  company: string;\r\n}\r\n\r\nexport default function SupplierProductsPage() {\r\n  const { id } = useParams();\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [name, setName] = useState('');\r\n  const [stock, setStock] = useState(0);\r\n  const [supplier, setSupplier] = useState<Supplier | null>(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const [productRes, supplierRes] = await Promise.all([\r\n        supabase.from('products').select('*').eq('supplier_id', id),\r\n        supabase.from('suppliers').select('id, company').eq('id', id).single(),\r\n      ]);\r\n\r\n      if (productRes.data) setProducts(productRes.data);\r\n      if (productRes.error) console.error(productRes.error.message);\r\n\r\n      if (supplierRes.data) setSupplier(supplierRes.data);\r\n      if (supplierRes.error) console.error(supplierRes.error.message);\r\n    };\r\n\r\n    if (id) fetchData();\r\n  }, [id]);\r\n\r\n  const handleAddProduct = async () => {\r\n    if (!name || !id) return;\r\n    const { data, error } = await supabase\r\n      .from('products')\r\n      .insert([{ name, stock, supplier_id: id }])\r\n      .select();\r\n\r\n    if (data) setProducts((prev) => [...prev, data[0]]);\r\n    if (error) alert(error.message);\r\n    setName('');\r\n    setStock(0);\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">\r\n        Products of {supplier ? supplier.company : 'Supplier'}\r\n      </h1>\r\n\r\n      <div className=\"bg-white p-4 rounded shadow space-y-2\">\r\n        <h2 className=\"font-semibold\">Add New Product</h2>\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            value={name}\r\n            onChange={(e) => setName(e.target.value)}\r\n            placeholder=\"Product name\"\r\n            className=\"border p-2 rounded w-full\"\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            value={stock}\r\n            onChange={(e) => setStock(Number(e.target.value))}\r\n            placeholder=\"Stock\"\r\n            className=\"border p-2 rounded w-24\"\r\n          />\r\n          <button\r\n            onClick={handleAddProduct}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded\"\r\n          >\r\n            Add\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <ul className=\"space-y-2\">\r\n        {products.length === 0 ? (\r\n          <p className=\"text-sm text-gray-500\">No products found for this supplier.</p>\r\n        ) : (\r\n          products.map((p) => (\r\n            <li key={p.id} className=\"bg-white p-4 rounded shadow flex justify-between\">\r\n              <span>\r\n                <strong>{p.name}</strong> — {p.stock} in stock\r\n              </span>\r\n            </li>\r\n          ))\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"AAAA,gDAAgD;;;;;AAGhD;AACA;AACA;;;AAJA;;;;AAkBe,SAAS;;IACtB,MAAM,EAAE,EAAE,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAmB;IAE1D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;0CAAE;YACR,MAAM;4DAAY;oBAChB,MAAM,CAAC,YAAY,YAAY,GAAG,MAAM,QAAQ,GAAG,CAAC;wBAClD,kHAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,eAAe;wBACxD,kHAAA,CAAA,UAAQ,CAAC,IAAI,CAAC,aAAa,MAAM,CAAC,eAAe,EAAE,CAAC,MAAM,IAAI,MAAM;qBACrE;oBAED,IAAI,WAAW,IAAI,EAAE,YAAY,WAAW,IAAI;oBAChD,IAAI,WAAW,KAAK,EAAE,QAAQ,KAAK,CAAC,WAAW,KAAK,CAAC,OAAO;oBAE5D,IAAI,YAAY,IAAI,EAAE,YAAY,YAAY,IAAI;oBAClD,IAAI,YAAY,KAAK,EAAE,QAAQ,KAAK,CAAC,YAAY,KAAK,CAAC,OAAO;gBAChE;;YAEA,IAAI,IAAI;QACV;yCAAG;QAAC;KAAG;IAEP,MAAM,mBAAmB;QACvB,IAAI,CAAC,QAAQ,CAAC,IAAI;QAClB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,kHAAA,CAAA,UAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC;YAAC;gBAAE;gBAAM;gBAAO,aAAa;YAAG;SAAE,EACzC,MAAM;QAET,IAAI,MAAM,YAAY,CAAC,OAAS;mBAAI;gBAAM,IAAI,CAAC,EAAE;aAAC;QAClD,IAAI,OAAO,MAAM,MAAM,OAAO;QAC9B,QAAQ;QACR,SAAS;IACX;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;;oBAAqB;oBACpB,WAAW,SAAS,OAAO,GAAG;;;;;;;0BAG7C,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAgB;;;;;;kCAC9B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gCACvC,aAAY;gCACZ,WAAU;;;;;;0CAEZ,6LAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,SAAS,OAAO,EAAE,MAAM,CAAC,KAAK;gCAC/C,aAAY;gCACZ,WAAU;;;;;;0CAEZ,6LAAC;gCACC,SAAS;gCACT,WAAU;0CACX;;;;;;;;;;;;;;;;;;0BAML,6LAAC;gBAAG,WAAU;0BACX,SAAS,MAAM,KAAK,kBACnB,6LAAC;oBAAE,WAAU;8BAAwB;;;;;2BAErC,SAAS,GAAG,CAAC,CAAC,kBACZ,6LAAC;wBAAc,WAAU;kCACvB,cAAA,6LAAC;;8CACC,6LAAC;8CAAQ,EAAE,IAAI;;;;;;gCAAU;gCAAI,EAAE,KAAK;gCAAC;;;;;;;uBAFhC,EAAE,EAAE;;;;;;;;;;;;;;;;AAUzB;GAnFwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}}]
}